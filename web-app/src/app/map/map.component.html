<main>
    <nav>
        <mat-form-field id="search" class="full-width" appearance="fill">
            <mat-label>Search</mat-label>
            <input matInput class="form-control" type="text" name="search" [(ngModel)]="search.text" autocomplete="off" placeholder='e.g. "Cafe"'>
            <mat-icon matSuffix (click)=emptySearch()>{{searchIcon}}</mat-icon>
        </mat-form-field>
        <button id="toggleFilterBtn" mat-flat-button (click)=toggleFilter()><mat-icon> {{filterIcon}}</mat-icon></button>
    </nav>
    <section [hidden]="!showAdditionalFilters">
    <mat-form-field id="datepicker" class="full-width" appearance="fill">
        <mat-label>Date</mat-label>
        <input matInput [matDatepicker]="dp" #dateElem [(ngModel)]="emptyVal">
        <mat-datepicker-toggle matSuffix [for]="dp">
        </mat-datepicker-toggle>
        <mat-datepicker #dp touchUi></mat-datepicker>      
    </mat-form-field>
    </section>


    <google-map 
        height="100%" 
        width="100%"
        [center]="center"
        [options]="options"
        mapId="ee691f8617d29770"
        (mapClick)="hideMapCard()"
        >
        <map-marker id="event-marker"
            *ngFor="let marker of EventMarker | filter:search.text | filter:search.date"
            [position]="marker.position"
            [icon]="marker.icon"
            [title]="marker.assignedEvent.name"
            (mapClick)="showMapCard(marker.assignedEvent)"
        >
        </map-marker>
        <map-marker width="120" height="120" style="z-index: 4000;"
            [position]="locationMarker.position"
            [icon]="locationMarker.icon"
        >
        </map-marker>
    </google-map>
</main>


<div id="draggable-card">
    <div class="draggable-thumb-wrapper" 
    (touchstart)="startDraggingHandler($event)"
    (touchmove)="draggingHandler($event)"
    (touchend)="stopDraggingHandler($event)"
    (click)="toggleView()">
        <div id="arrow" class="draggable-thumb">
            <span class="left-bar"></span>
            <span class="right-bar"></span>
        </div>
    </div>
    <app-event-card id="selected_event" [event]="selected_event"></app-event-card>
</div>
